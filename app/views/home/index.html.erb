<div class="row">
  <div class="col-sm">
    <h1>CEDAR Statistics</h1>

    <table class="table">
      <tbody>
        <tr>
          <td>Total Artifacts</td>
          <td><%= @artifact_count %></td>
        </tr>
        <tr>
          <td>Artifacts Missing Description</td>
          <td>
            <%= @artifact_count_missing_description %>
            <% if @artifact_count > 0 %>
              (<%= number_to_percentage(@artifact_count_missing_description * 100 / @artifact_count, precision: 0) %>)
            <% end %>
          </td>
        </tr>
        <tr>
          <td>Artifacts Missing Keywords</td>
          <td>
            <%= @artifact_count_missing_keywords %>
            <% if @artifact_count > 0 %>
              (<%= number_to_percentage(@artifact_count_missing_keywords * 100 / @artifact_count, precision: 0) %>)
            <% end %>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<%= render 'data_with_pie_chart', title: 'Artifacts Per Repository', data: @artifacts_per_repository %>

<%= render 'data_with_pie_chart', title: 'Artifacts By Status', data: @artifacts_by_status %>

<%= render 'data_with_pie_chart', title: 'Top 10 Keywords', data: @top_artifacts_per_keyword, path_method: :keyword_path %>

<div class="row mt-5">
  <div class="col-sm">
    <h3>Tag Cloud</h3>
    <div id='tag-cloud' />
    <script>tagCloud('#tag-cloud', [1200, 800], <%= raw @keyword_counts.to_json %>)</script>
  </div>
</div>
